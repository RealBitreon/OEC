# معلومات الفروع - Branch Information

## الفروع المتاحة

### 1. `main` (الفرع الرئيسي)
**الحالة:** يحتوي على جميع التحديثات والإصلاحات الأخيرة
**آخر commit:** `c42b441` - fix: إصلاح مشكلة فشل حفظ الإجابات

**التحديثات في 4 فبراير 2026:**
1. ✅ إصلاح مشكلة فشل حفظ الإجابات (participant_email required)
2. ✅ إعادة تفعيل المشاركة المباشرة للطلاب
3. ✅ إزالة middleware.ts لحل تعارض Next.js 16
4. ✅ معالجة أخطاء production-grade للوحة التحكم
5. ✅ حل أخطاء 500 التي تسبب إعادة توجيه لوحة التحكم
6. ✅ تحديث سياسات RLS
7. ✅ إضافة logging شامل لـ mark-winner API
8. ✅ إصلاح mark-winner API 500 error
9. ✅ إصلاح خطأ TypeScript في createUser
10. ✅ إصلاح winner/loser toggle

**الميزات:**
- ✅ المشاركة المباشرة للطلاب مفعّلة
- ✅ حفظ الإجابات يعمل بشكل صحيح
- ✅ معالجة أخطاء محسّنة
- ✅ تتبع المحاولات في attempt_tracking
- ✅ إنشاء participant_email تلقائياً

---

### 2. `before-feb4-changes` (قبل تحديثات 4 فبراير)
**الحالة:** نسخة مستقرة قبل تحديثات 4 فبراير 2026
**آخر commit:** `58b5962` - Fix dashboard data display (3 فبراير 2026)

**الميزات:**
- ✅ عرض بيانات لوحة التحكم (Archives, Users, Audit Log)
- ✅ زر "Go to Dashboard" في الـ header
- ✅ إخفاء موقع المصدر الفارغ
- ✅ رسالة "تحت المراجعة"
- ✅ عد المحاولات فقط عند الإرسال
- ✅ عرض دليل الطالب
- ✅ وظيفة الحذف
- ⚠️ **المشاركة المباشرة للطلاب معطلة**
- ⚠️ **مشكلة في حفظ الإجابات (participant_email)**

**متى تستخدم هذا الفرع:**
- إذا كنت تريد النسخة المستقرة قبل التحديثات الأخيرة
- إذا واجهت مشاكل في الفرع الرئيسي
- للمقارنة بين النسخ

---

## كيفية التبديل بين الفروع

### الانتقال إلى الفرع الرئيسي (مع التحديثات):
```bash
git checkout main
git pull origin main
```

### الانتقال إلى النسخة القديمة (قبل 4 فبراير):
```bash
git checkout before-feb4-changes
git pull origin before-feb4-changes
```

---

## المقارنة بين الفروع

| الميزة | main | before-feb4-changes |
|--------|------|---------------------|
| المشاركة المباشرة للطلاب | ✅ مفعّلة | ❌ معطلة |
| حفظ الإجابات | ✅ يعمل | ⚠️ مشكلة |
| participant_email | ✅ تلقائي | ❌ مطلوب |
| معالجة الأخطاء | ✅ محسّنة | ⚠️ عادية |
| تتبع المحاولات | ✅ محسّن | ✅ يعمل |
| لوحة التحكم | ✅ مستقرة | ✅ مستقرة |

---

## التوصيات

### للإنتاج (Production):
استخدم **`main`** - يحتوي على جميع الإصلاحات الأخيرة

### للاختبار:
استخدم **`main`** - للتأكد من عمل جميع الميزات

### للرجوع للنسخة القديمة:
استخدم **`before-feb4-changes`** - إذا واجهت مشاكل

---

## ملاحظات مهمة

1. **الفرع `main` هو الأحدث والأكثر استقراراً**
2. **الفرع `before-feb4-changes` للرجوع فقط**
3. **لا تقم بعمل commits على `before-feb4-changes`** - هو للمرجع فقط
4. **جميع التطويرات الجديدة يجب أن تكون على `main`**

---

## تاريخ الإنشاء
**التاريخ:** 4 فبراير 2026
**الغرض:** حفظ نسخة احتياطية قبل تحديثات 4 فبراير
