# ุชุญุณููุงุช ูุธุงู ุงููุดุงุฑูุฉ ูู ุงููุณุงุจูุงุช

## ุงูุชุญุฏูุซุงุช ุงููููุฐุฉ

### 1. ุชูุณูู ุงูุงุณู ุฅูู ุซูุงุซุฉ ุญููู
- **ุงูุงุณู ุงูุฃูู**: ุญูู ูููุตู ููุงุณู ุงูุฃูู
- **ุงุณู ุงูุฃุจ**: ุญูู ูููุตู ูุงุณู ุงูุฃุจ
- **ุงููุจููุฉ/ุงูุนุงุฆูุฉ**: ุญูู ูููุตู ูููุจููุฉ ุฃู ุงุณู ุงูุนุงุฆูุฉ
- ุฌููุน ุงูุญููู **ุฅูุฒุงููุฉ** ููุชู ุฏูุฌูุง ูุชูููู ุงูุงุณู ุงููุงูู

### 2. ุงุณุชุจุฏุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจุงูุตู ุงูุฏุฑุงุณู
- ุชู ุฅุฒุงูุฉ ุญูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุชู ุฅุถุงูุฉ ูุงุฆูุฉ ููุณุฏูุฉ ููุตู ุงูุฏุฑุงุณู (ูู ุงูุฃูู ุฅูู ุงูุซุงูู ุนุดุฑ)
- ุงูุญูู **ุฅูุฒุงูู** ูุฌููุน ุงููุดุงุฑููู

### 3. ุฅุถุงูุฉ ุญูู ุงูุฏููู
- ุชู ุฅุถุงูุฉ ุญูู ูุตู **ุฅูุฒุงูู** ููุชุงุจุฉ ุงูุฏููู ุนูู ุงูุฅุฌุงุจุฉ
- ูุธูุฑ ููู ุณุคุงู ุจุดูู ูููุตู
- ูุฌุจ ูุชุงุจุฉ ุงูุฏููู ููุญุตูู ุนูู ุงูุชุฐูุฑุฉ
- ุชุตููู ูููุฒ ุจุฎูููุฉ ููุฑูุงููุฉ ูููุช ุงูุงูุชุจุงู
- ุฑุณุงูุฉ ุชุญุฐูุฑูุฉ ูุงุถุญุฉ: "โ๏ธ ูุฌุจ ูุชุงุจุฉ ุงูุฏููู ููุญุตูู ุนูู ุงูุชุฐูุฑุฉ"

### 4. ุนุฑุถ ุฌููุน ุงูุฃุณุฆูุฉ
- ุฒุฑ "ุนุฑุถ ุฌููุน ุงูุฃุณุฆูุฉ" ูู ุดุฑูุท ุงูุชูุฏู
- ูููู ููุทุงูุจ ุฑุคูุฉ ุฌููุน ุงูุฃุณุฆูุฉ ูุจู ุงูุจุฏุก ุจุงูุฅุฌุงุจุฉ
- ูุธูุฑ ุญุงูุฉ ุงูุฅุฌุงุจุฉ (โ ุชูุช ุงูุฅุฌุงุจุฉ) ููู ุณุคุงู
- ูููู ุงูุฎุฑูุฌ ูุงูุจุญุซ ุซู ุงูุนูุฏุฉ ููุฅุฌุงุจุฉ

### 5. ุนุฑุถ ุนุฏุฏ ุงูุชุฐุงูุฑ ุงูููุชุณุจุฉ
- ุจุนุฏ ุฅุฑุณุงู ุงูุฅุฌุงุจุงุชุ ูุชู ุนุฑุถ ุนุฏุฏ ุงูุชุฐุงูุฑ ุงูููุชุณุจุฉ
- ุชุตููู ุฌุฐุงุจ ูุน ุฃููููุฉ ุชุฐูุฑุฉ ๐๏ธ
- ุฑุณุงูุฉ ูุงุถุญุฉ ุนู ุนุฏุฏ ุงูุชุฐุงูุฑ
- ุฑุณุงูุฉ ุชูุถูุญูุฉ ุฅุฐุง ูู ูุญุตู ุงูุทุงูุจ ุนูู ุชุฐุงูุฑ

### 6. ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ
- ูููู ููุทุงูุจ ุงููุดุงุฑูุฉ ูุฑุฉ ูุงุญุฏุฉ ููุท ุจุดูู ุงูุชุฑุงุถู
- ุงููุนูู ููููู ุงูุณูุงุญ ุจุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุฑุฉ ูุงุญุฏุฉ ุฅุถุงููุฉ
- ูุชู ุชุชุจุน ุงููุญุงููุงุช ุงูุณุงุจูุฉ
- ุฑุณุงูุฉ ูุงุถุญุฉ ููุทุงูุจ: "ููููู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุฑุฉ ูุงุญุฏุฉ ููุท ุจููุงููุฉ ุงููุนูู"

## ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุญููู ุฌุฏูุฏุฉ ูู submissions.json:
```json
{
  "first_name": "ุงูุงุณู ุงูุฃูู",
  "father_name": "ุงุณู ุงูุฃุจ",
  "family_name": "ุงููุจููุฉ/ุงูุนุงุฆูุฉ",
  "grade": "ุงูุตู ุงูุฏุฑุงุณู",
  "proofs": {
    "question_id": "ูุต ุงูุฏููู"
  },
  "tickets_earned": 0,
  "retry_allowed": false,
  "is_retry": false,
  "previous_submission_id": null,
  "retried": false,
  "new_submission_id": null
}
```

## ุงูุชุญูู ูู ุงูุจูุงูุงุช

### ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ:
1. ุงูุชุญูู ูู ููุก ุฌููุน ุญููู ุงูุงุณู ุงูุซูุงุซู
2. ุงูุชุญูู ูู ุงุฎุชูุงุฑ ุงูุตู ุงูุฏุฑุงุณู
3. ุงูุชุญูู ูู ูุชุงุจุฉ ุงูุฏููู ููู ุณุคุงู
4. ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

### ูู ุงููุงุฌูุฉ ุงูุฎูููุฉ (API):
1. ุงูุชุญูู ูู ูุฌูุฏ ุฌููุน ุงูุญููู ุงููุทููุจุฉ
2. ุงูุชุญูู ูู ูุชุงุจุฉ ุงูุฏููู ูุฌููุน ุงูุฃุณุฆูุฉ
3. ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ูุดุงุฑูุฉ ุณุงุจูุฉ (ุฅูุง ุฅุฐุง ูุงู retry_allowed = true)
4. ุญุณุงุจ ุงูุชุฐุงูุฑ ุจูุงุกู ุนูู ููุงุนุฏ ุงููุณุงุจูุฉ

## ุญุณุงุจ ุงูุชุฐุงูุฑ

ูุชู ุญุณุงุจ ุงูุชุฐุงูุฑ ุจูุงุกู ุนูู ููุงุนุฏ ุงููุณุงุจูุฉ:

### 1. all_correct (ุฌููุน ุงูุฅุฌุงุจุงุช ุตุญูุญุฉ):
```javascript
tickets = (score === totalQuestions) ? score * ticketsPerCorrect : 0
```

### 2. min_correct (ุญุฏ ุฃุฏูู ูู ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ):
```javascript
tickets = (score >= minCorrectAnswers) ? score * ticketsPerCorrect : 0
```

## ูุธููุฉ ุงูุณูุงุญ ุจุฅุนุงุฏุฉ ุงููุญุงููุฉ (ูููุนูู)

### ูู ููุญุฉ ุงูุชุญูู:
1. ูููู ูููุนูู (LRC_MANAGER ุฃู CEO) ุงูุณูุงุญ ุจุฅุนุงุฏุฉ ุงููุญุงููุฉ
2. ูุชู ุชุญุฏูุซ ุญูู `retry_allowed` ุฅูู `true`
3. ูุชู ุชุณุฌูู ุงูุนูููุฉ ูู ุณุฌู ุงูุชุฏููู
4. ุงูุทุงูุจ ููููู ุงููุดุงุฑูุฉ ูุฑุฉ ุฃุฎุฑู

### ุงูุงุณุชุฎุฏุงู:
```typescript
await allowRetry(submissionId)
```

## ุงููููุงุช ุงููุนุฏูุฉ

1. **app/competition/[slug]/participate/ParticipationForm.tsx**
   - ุฅุถุงูุฉ ุญููู ุงูุงุณู ุงูุซูุงุซู
   - ุฅุถุงูุฉ ุญูู ุงูุตู ุงูุฏุฑุงุณู
   - ุฅุถุงูุฉ ุญูู ุงูุฏููู
   - ุฅุถุงูุฉ ุนุฑุถ ุฌููุน ุงูุฃุณุฆูุฉ
   - ุฅุถุงูุฉ ุนุฑุถ ุงูุชุฐุงูุฑ ุงูููุชุณุจุฉ

2. **app/api/competition/submit/route.ts**
   - ุงูุชุญูู ูู ุงูุญููู ุงูุฌุฏูุฏุฉ
   - ุงูุชุญูู ูู ุงูุฏููู
   - ุญุณุงุจ ุงูุชุฐุงูุฑ
   - ุงูุชุญูู ูู ุงููุญุงููุงุช ุงูุณุงุจูุฉ
   - ุฏุนู ุฅุนุงุฏุฉ ุงููุญุงููุฉ

3. **app/dashboard/actions/submissions.ts**
   - ุฅุถุงูุฉ ูุธููุฉ `allowRetry()`
   - ุชุณุฌูู ูู ุณุฌู ุงูุชุฏููู

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ูุฅููุงู ุงูุชูุงูู:
1. ุชุญุฏูุซ ูุงุฌูุฉ ูุฑุงุฌุนุฉ ุงูุฅุฑุณุงููุงุช ูุนุฑุถ:
   - ุงูุงุณู ุงูุซูุงุซู
   - ุงูุตู ุงูุฏุฑุงุณู
   - ุงูุฏููู
   - ุฒุฑ "ุงูุณูุงุญ ุจุฅุนุงุฏุฉ ุงููุญุงููุฉ"

2. ุชุญุฏูุซ ูุงุนุฏุฉ ุจูุงูุงุช Supabase:
```sql
-- ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ ุฅูู ุฌุฏูู submissions
ALTER TABLE submissions 
ADD COLUMN first_name TEXT,
ADD COLUMN father_name TEXT,
ADD COLUMN family_name TEXT,
ADD COLUMN grade TEXT,
ADD COLUMN proofs JSONB,
ADD COLUMN tickets_earned INTEGER DEFAULT 0,
ADD COLUMN retry_allowed BOOLEAN DEFAULT FALSE,
ADD COLUMN is_retry BOOLEAN DEFAULT FALSE,
ADD COLUMN previous_submission_id UUID REFERENCES submissions(id),
ADD COLUMN retried BOOLEAN DEFAULT FALSE,
ADD COLUMN new_submission_id UUID REFERENCES submissions(id);
```

3. ุชุญุฏูุซ ูุงุฌูุฉ ููุญุฉ ุงูุชุญูู ูุนุฑุถ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ

## ููุงุญุธุงุช ูููุฉ

- โ ุฌููุน ุงูุญููู ุงูุฌุฏูุฏุฉ ุฅูุฒุงููุฉ
- โ ุงูุฏููู ูุทููุจ ููุญุตูู ุนูู ุงูุชุฐูุฑุฉ
- โ ูููู ููุทุงูุจ ุฑุคูุฉ ุฌููุน ุงูุฃุณุฆูุฉ
- โ ูุชู ุนุฑุถ ุนุฏุฏ ุงูุชุฐุงูุฑ ุจุนุฏ ุงูุฅุฑุณุงู
- โ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุชุชุทูุจ ููุงููุฉ ุงููุนูู
- โ ูุชู ุชุชุจุน ุฌููุน ุงููุญุงููุงุช

## ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงููุดุงุฑูุฉ:
1. ุงูุชุญ ุตูุญุฉ ุงููุดุงุฑูุฉ ูู ูุณุงุจูุฉ
2. ุชุญูู ูู ุธููุฑ ุญููู ุงูุงุณู ุงูุซูุงุซู
3. ุชุญูู ูู ุธููุฑ ูุงุฆูุฉ ุงูุตููู
4. ุฃุฌุจ ุนูู ุณุคุงู ุจุฏูู ูุชุงุจุฉ ุงูุฏููู โ ูุฌุจ ุฃู ูุธูุฑ ุฎุทุฃ
5. ุงูุชุจ ุงูุฏููู ูุฃุฑุณู โ ูุฌุจ ุฃู ุชุธูุฑ ุงูุชุฐุงูุฑ
6. ุญุงูู ุงููุดุงุฑูุฉ ูุฑุฉ ุฃุฎุฑู โ ูุฌุจ ุฃู ูุธูุฑ ุฎุทุฃ

### ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุงููุญุงููุฉ:
1. ุณุฌู ุฏุฎูู ููุนูู
2. ุงูุชุญ ูุฑุงุฌุนุฉ ุงูุฅุฑุณุงููุงุช
3. ุงุณูุญ ุจุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุทุงูุจ
4. ุณุฌู ุฏุฎูู ูุทุงูุจ
5. ุญุงูู ุงููุดุงุฑูุฉ ูุฑุฉ ุฃุฎุฑู โ ูุฌุจ ุฃู ููุฌุญ
