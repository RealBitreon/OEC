# ุฏููู ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน - ููุญุฉ ุงูุชุญูู

## โก ุงูุฅุนุฏุงุฏ ูู 5 ุฏูุงุฆู

### ุงูุฎุทูุฉ 1: ุชุดุบูู Migration

1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู SQL Editor
3. ุงูุณุฎ ูุญุชูู `supabase_dashboard_migration.sql`
4. ุงูุตู ูุดุบูู
5. ุชุฃูุฏ ูู ุฑุณุงูุฉ ุงููุฌุงุญ โ

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ูุณุชุฎุฏู CEO

ูู Supabase SQL Editor:

```sql
-- ุงุณุชุจุฏู ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ
INSERT INTO profiles (id, username, role)
VALUES (
  'ุงุญุตู-ุนูู-id-ูู-auth.users',
  'admin',
  'CEO'
);
```

ุฃู ุงุณุชุฎุฏู Supabase Auth UI ูุฅูุดุงุก ูุณุชุฎุฏูุ ุซู:

```sql
-- ุงุญุตู ุนูู user_id ูู auth.users
SELECT id, email FROM auth.users ORDER BY created_at DESC LIMIT 1;

-- ุฃุถู ููู profiles
INSERT INTO profiles (id, username, role)
VALUES ('user-id-here', 'admin', 'CEO');
```

### ุงูุฎุทูุฉ 3: ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุชุฃูุฏ ูู ูุฌูุฏ:

```env
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

### ุงูุฎุทูุฉ 4: ุชุดุบูู ุงูุชุทุจูู

```bash
npm install
npm run dev
```

### ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ

1. ุงุฐูุจ ุฅูู `http://localhost:3000/dashboard`
2. ุณูุชู ุชูุฌููู ุฅูู `/login`
3. ุณุฌู ุฏุฎูู ุจุญุณุงุจ CEO
4. ูุฌุจ ุฃู ุชุฑู ููุญุฉ ุงูุชุญูู โ

## โ ูุงุฆูุฉ ุงูุชุญูู

- [ ] Migration ูุฌุญ ุจุฏูู ุฃุฎุทุงุก
- [ ] ููุฌุฏ ูุณุชุฎุฏู CEO ูู profiles
- [ ] ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุตุญูุญุฉ
- [ ] ุงูุชุทุจูู ูุนูู ุนูู localhost
- [ ] ุชุณุฌูู ุงูุฏุฎูู ูุนูู
- [ ] ููุญุฉ ุงูุชุญูู ุชุธูุฑ
- [ ] ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุชุนุฑุถ ุฌููุน ุงูุฃูุณุงู (CEO)
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุฎุทุฃ: "policy already exists"

**ุงูุญู**: Migration ูุญุชูู ุนูู `DROP POLICY IF EXISTS` ุงูุขู. ุดุบูู ูุฑุฉ ุฃุฎุฑู.

### ุฎุทุฃ: "Unauthorized" ูู Dashboard

**ุงูุณุจุจ**: ุงููุณุชุฎุฏู ุบูุฑ ููุฌูุฏ ูู profiles

**ุงูุญู**:
```sql
-- ุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู
SELECT * FROM profiles WHERE id = 'your-user-id';

-- ุฅุฐุง ูู ููู ููุฌูุฏุ ุฃุถูู
INSERT INTO profiles (id, username, role)
VALUES ('your-user-id', 'username', 'CEO');
```

### ุฎุทุฃ: Redirect Loop

**ุงูุณุจุจ**: ุงููุณุชุฎุฏู ููุฌูุฏ ูู auth.users ููู ููุณ ูู profiles

**ุงูุญู**: ุฃุถู ุงููุณุชุฎุฏู ุฅูู profiles (ุงูุธุฑ ุฃุนูุงู)

### ุฎุทุฃ: "Cannot read properties of null"

**ุงูุณุจุจ**: ุงูุจูุงูุงุช ุบูุฑ ููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุญู**: ุชุญูู ูู ุฃู:
1. ุงูุฌุฏุงูู ููุฌูุฏุฉ
2. RLS policies ููุนูุฉ
3. ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุงุช ุงููุฑุงุกุฉ

## ๐ฏ ุงูุฎุทูุฉ ุงูุชุงููุฉ

ุจุนุฏ ุงูุฅุนุฏุงุฏ ุงููุงุฌุญ:

1. **ุฅูุดุงุก ูุณุงุจูุฉ**:
   - ุงุฐูุจ ุฅูู "ุฅุฏุงุฑุฉ ุงููุณุงุจูุงุช"
   - ุงุถุบุท "ุฅูุดุงุก ูุณุงุจูุฉ ุฌุฏูุฏุฉ"
   - ุงููุฃ ุงูุจูุงูุงุช
   - ุงุญูุธ

2. **ุฅุถุงูุฉ ุฃุณุฆูุฉ**:
   - ุงุฐูุจ ุฅูู "ุงูุฃุณุฆูุฉ"
   - ุงุถุบุท "ุฅุถุงูุฉ ุณุคุงู"
   - (ุณูุชู ุชูุนููู ูุฑูุจุงู)

3. **ุฅูุดุงุก ูุณุชุฎุฏููู**:
   - ุงุฐูุจ ุฅูู "ุงููุณุชุฎุฏููู"
   - ุฃุถู LRC_MANAGER
   - ุฃุถู STUDENT ููุงุฎุชุจุงุฑ

## ๐ ุจูุงูุงุช ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)

ูุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุงุฎุชุจุงุฑ:

```sql
-- ูุณุงุจูุฉ ุชุฌุฑูุจูุฉ
INSERT INTO competitions (title, description, slug, status, start_at, end_at, wheel_spin_at, created_by)
VALUES (
  'ูุณุงุจูุฉ ุชุฌุฑูุจูุฉ',
  'ูุณุงุจูุฉ ููุงุฎุชุจุงุฑ',
  'test-competition',
  'draft',
  NOW(),
  NOW() + INTERVAL '30 days',
  NOW() + INTERVAL '37 days',
  'your-ceo-user-id'
);

-- ุทุงูุจ ุชุฌุฑูุจู
-- (ุฃูุดุฆ ูู Supabase Auth ุฃููุงูุ ุซู:)
INSERT INTO profiles (id, username, role)
VALUES ('student-user-id', 'student1', 'STUDENT');
```

## ๐ ุฌุงูุฒ ููุฅูุชุงุฌ

ุนูุฏูุง ุชููู ุฌุงูุฒุงู ููุฅูุชุงุฌ:

1. ุบููุฑ ูููุงุช ุงููุฑูุฑ
2. ูุนูู 2FA ูู Supabase
3. ุฑุงุฌุน RLS policies
4. ูุนูู rate limiting
5. ุฃุถู monitoring
6. ุงุฎุชุจุฑ ุนูู ุฃุฌูุฒุฉ ูุฎุชููุฉ

---

**ุชูุงูููุง! ๐** ููุญุฉ ุงูุชุญูู ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู.
