# ุฏููู ุฅุนุงุฏุฉ ุชุนููู ุงูุจูุงูุงุช - Data Reset Guide

## โ๏ธ ุชุญุฐูุฑ ููู - Important Warning

**ุฅุนุงุฏุฉ ุชุนููู ุงูุจูุงูุงุช ูุง ูููู ุงูุชุฑุงุฌุน ุนููุง!**  
**Data reset is IRREVERSIBLE!**

ูู ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุชุดุบูู ุฃู ูู ูุฐู ุงูุณูุฑูุจุชุงุช.  
Create a backup before running any of these scripts.

## ๐ ุงููููุงุช ุงููุชุงุญุฉ - Available Files

### 1. `reset_all_data.sql` - ุฅุนุงุฏุฉ ุชุนููู ูุงููุฉ
**ุงูุงุณุชุฎุฏุงู:** ุญุฐู ุฌููุน ุงูุจูุงูุงุช (ุงููุณุงุจูุงุชุ ุงูุฃุณุฆูุฉุ ุงูุฅุฌุงุจุงุชุ ุฅูุฎ)  
**ูุญุชูุธ ุจู:** ูููู ุงูุฌุฏุงููุ ุญุณุงุจุงุช ุงููุณุชุฎุฏููู  
**ูุญุฐู:** ูู ุงูุจูุงูุงุช ูู ุงูุชุทุจูู

```sql
-- ูู Supabase SQL Editor
-- ูุณุฎ ููุตู ูุญุชูู ุงูููู ูุชุดุบููู
```

**ูุชู ุชุณุชุฎุฏูู:**
- โ ุจุฏุงูุฉ ุฌุฏูุฏุฉ ููููุณู ุงูุฏุฑุงุณู
- โ ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุงุฎุชุจุงุฑ
- โ ุชูุธูู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
- โ ูุง ุชุณุชุฎุฏูู ูู ุงูุฅูุชุงุฌ ุจุฏูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ!

---

### 2. `reset_data_selective.sql` - ุฅุนุงุฏุฉ ุชุนููู ุงูุชูุงุฆูุฉ
**ุงูุงุณุชุฎุฏุงู:** ุญุฐู ุจูุงูุงุช ูุญุฏุฏุฉ ููุท  
**ูุฑู:** ุงุฎุชุฑ ูุง ุชุฑูุฏ ุญุฐูู

**ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ:**

#### Option 1: ุญุฐู ุจูุงูุงุช ุงููุณุงุจูุงุช ููุท
```sql
-- ูุญุฐู: ุงููุณุงุจูุงุชุ ุงูุฃุณุฆูุฉุ ุงูุฅุฌุงุจุงุชุ ุงูุชุฐุงูุฑ
-- ูุญุชูุธ ุจู: ุญุณุงุจุงุช ุงููุณุชุฎุฏููู
```

#### Option 2: ุญุฐู ูุณุงุจูุฉ ูุงุญุฏุฉ ูุญุฏุฏุฉ
```sql
-- ุงุณุชุจุฏู COMPETITION_ID_HERE ุจูุนุฑู ุงููุณุงุจูุฉ
-- ูุญุฐู ููุท ุจูุงูุงุช ูุฐู ุงููุณุงุจูุฉ
```

#### Option 3: ุญุฐู ุงููุณุงุจูุงุช ุงูุชุฌุฑูุจูุฉ ููุท
```sql
-- ูุญุฐู ุงููุณุงุจูุงุช ุฐุงุช ุงูุญุงูุฉ 'draft'
-- ูุญุชูุธ ุจุงููุณุงุจูุงุช ุงููุดุทุฉ ูุงููุคุฑุดูุฉ
```

#### Option 4: ุญุฐู ุฃุณุฆูุฉ ุงูุชุฏุฑูุจ ููุท
```sql
-- ูุญุฐู ููุท ุงูุฃุณุฆูุฉ ุงูุชุฏุฑูุจูุฉ
-- ูุญุชูุธ ุจุฃุณุฆูุฉ ุงููุณุงุจูุงุช
```

#### Option 5: ุญุฐู ุงูุฅุฌุงุจุงุช ููุท
```sql
-- ูุญุฐู ุฌููุน ุงูุฅุฌุงุจุงุช
-- ูุญุชูุธ ุจุงูุฃุณุฆูุฉ ูุงููุณุงุจูุงุช
```

#### Option 6: ุฅุนุงุฏุฉ ุชุนููู ุงููุญุงููุงุช
```sql
-- ูุญุฐู ุณุฌู ุงููุญุงููุงุช
-- ูุณูุญ ููุทูุงุจ ุจุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู
```

#### Option 7: ุญุฐู ุณุฌูุงุช ุงูุชุฏููู
```sql
-- ูุญุฐู ุงูุณุฌูุงุช ุงููุฏููุฉ
-- ููุธู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

---

### 3. `delete_auth_users.sql` - ุญุฐู ุญุณุงุจุงุช ุงููุณุชุฎุฏููู
**โ๏ธ ุฎุทูุฑ ุฌุฏุงู - Very Dangerous!**

**ุงูุงุณุชุฎุฏุงู:** ุญุฐู ุญุณุงุจุงุช ุงููุณุชุฎุฏููู  
**ุงููุชูุฌุฉ:** ุชุณุฌูู ุฎุฑูุฌ ุฌููุน ุงููุณุชุฎุฏููู

**ุงูุฎูุงุฑุงุช:**

#### ุญุฐู ูุณุชุฎุฏููู ูุญุฏุฏูู
```sql
-- ุญุฐู ุงููุณุชุฎุฏููู ุงูุชุฌุฑูุจููู ููุท
DELETE FROM auth.users WHERE email LIKE '%test%';
```

#### ุญุฐู ุฌููุน ุงููุณุชุฎุฏููู
```sql
-- โ๏ธ ูุญุฐู ุงููู ุจูุง ูููู ุงููุฏูุฑูู!
DELETE FROM auth.users;
```

**ูุชู ุชุณุชุฎุฏูู:**
- โ ุจูุฆุฉ ุงูุชุทููุฑ/ุงูุงุฎุชุจุงุฑ
- โ ุฅุนุงุฏุฉ ุชุนููู ูุงููุฉ ูููุธุงู
- โ ุฃุจุฏุงู ูู ุงูุฅูุชุงุฌ ุจุฏูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ!

---

## ๐ ุฎุทูุงุช ุงูุงุณุชุฎุฏุงู - Usage Steps

### ุงูุทุฑููุฉ ุงูุขููุฉ - Safe Method

1. **ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ**
   ```
   Supabase Dashboard โ Database โ Backups โ Create backup
   ```

2. **ุงุฎุชุจุงุฑ ูู ุจูุฆุฉ ุงูุชุทููุฑ ุฃููุงู**
   - ุฌุฑุจ ุงูุณูุฑูุจุช ูู ูุงุนุฏุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ
   - ุชุฃูุฏ ูู ุงููุชุงุฆุฌ

3. **ุชุดุบูู ุงูุณูุฑูุจุช**
   ```
   Supabase Dashboard โ SQL Editor โ New query
   ูุณุฎ ููุตู ูุญุชูู ุงูููู
   ุชุดุบูู
   ```

4. **ุงูุชุญูู ูู ุงููุชุงุฆุฌ**
   ```sql
   -- ุชุดุบูู ุงุณุชุนูุงูุงุช ุงูุชุญูู ูู ููุงูุฉ ุงูููู
   ```

---

## ๐ ุงุณุชุนูุงูุงุช ูููุฏุฉ - Useful Queries

### ุนุฑุถ ุนุฏุฏ ุงูุณุฌูุงุช ูู ูู ุฌุฏูู
```sql
SELECT 
  'competitions' as table_name, COUNT(*) as count FROM competitions
UNION ALL
SELECT 'questions', COUNT(*) FROM questions
UNION ALL
SELECT 'submissions', COUNT(*) FROM submissions
UNION ALL
SELECT 'participants', COUNT(*) FROM participants
ORDER BY table_name;
```

### ุนุฑุถ ุงููุณุงุจูุงุช ูุน ุฅุญุตุงุฆูุงุชูุง
```sql
SELECT 
  c.title,
  c.status,
  COUNT(DISTINCT q.id) as questions,
  COUNT(DISTINCT s.id) as submissions,
  COUNT(DISTINCT p.id) as participants
FROM competitions c
LEFT JOIN questions q ON q.competition_id = c.id
LEFT JOIN submissions s ON s.competition_id = c.id
LEFT JOIN participants p ON p.competition_id = c.id
GROUP BY c.id, c.title, c.status;
```

### ุงูุจุญุซ ุนู ูุณุงุจูุฉ ูุนููุฉ
```sql
SELECT id, title, slug, status 
FROM competitions 
WHERE title LIKE '%ุงุณู ุงููุณุงุจูุฉ%';
```

---

## ๐ ุงูุงุณุชุนุงุฏุฉ - Recovery

### ุฅุฐุง ุญุฐูุช ุงูุจูุงูุงุช ุจุงูุฎุทุฃ:

1. **ุงุณุชุนุงุฏุฉ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ**
   ```
   Supabase Dashboard โ Database โ Backups โ Restore
   ```

2. **ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุจูุงูุงุช ูุฏููุงู**
   - ุงุณุชุฎุฏู ููุญุฉ ุงูุชุญูู
   - ุฃู ุงุณุชูุฑุฏ ูู ููู CSV

---

## ๐ ููุงุญุธุงุช ูููุฉ - Important Notes

### ูุง ูุชู ุญุฐูู:
- โ ุงููุณุงุจูุงุช ูุงูุฃุณุฆูุฉ
- โ ุงูุฅุฌุงุจุงุช ูุงููุดุงุฑูุงุช
- โ ุงูุชุฐุงูุฑ ูุณุฌูุงุช ุงูุนุฌูุฉ
- โ ุณุฌูุงุช ุงููุญุงููุงุช
- โ ุณุฌูุงุช ุงูุชุฏููู

### ูุง ูุชู ุงูุงุญุชูุงุธ ุจู:
- โ ูููู ุงูุฌุฏุงูู
- โ ุณูุงุณุงุช RLS
- โ ุงูุฏูุงู ูุงููุญูุฒุงุช
- โ ุงูููุงุฑุณ
- โ ุญุณุงุจุงุช ุงููุณุชุฎุฏููู (ุฅูุง ุฅุฐุง ุญุฐูุชูุง ุตุฑุงุญุฉ)

### ุงูุฃุฏุงุก:
- `TRUNCATE` ุฃุณุฑุน ูู `DELETE`
- `CASCADE` ูุญุฐู ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ ุชููุงุฆูุงู
- ุงูุณูุฑูุจุชุงุช ูุญุณููุฉ ููุณุฑุนุฉ

---

## ๐ฏ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู - Use Cases

### 1. ุจุฏุงูุฉ ููุณู ุฏุฑุงุณู ุฌุฏูุฏ
```sql
-- ุงุณุชุฎุฏู reset_all_data.sql
-- ูุญุฐู ูู ุงูุจูุงูุงุช ุงููุฏููุฉ
-- ูุญุชูุธ ุจุญุณุงุจุงุช ุงููุนูููู
```

### 2. ุญุฐู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ
```sql
-- ุงุณุชุฎุฏู reset_data_selective.sql โ Option 3
-- ูุญุฐู ุงููุณุงุจูุงุช ุงูุชุฌุฑูุจูุฉ ููุท
```

### 3. ุฅุนุทุงุก ุงูุทูุงุจ ูุฑุตุฉ ุฌุฏูุฏุฉ
```sql
-- ุงุณุชุฎุฏู reset_data_selective.sql โ Option 6
-- ูุนูุฏ ุชุนููู ุงููุญุงููุงุช ููุท
```

### 4. ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
-- ุงุณุชุฎุฏู reset_data_selective.sql โ Option 7
-- ูุญุฐู ุงูุณุฌูุงุช ุงููุฏููุฉ
```

---

## โก ูุตุงุฆุญ ุณุฑูุนุฉ - Quick Tips

1. **ุฏุงุฆูุงู ุงุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฃููุงู**
2. **ุฌุฑุจ ูู ุจูุฆุฉ ุงูุชุทููุฑ ูุจู ุงูุฅูุชุงุฌ**
3. **ุงูุฑุฃ ุงูุณูุฑูุจุช ูุจู ุชุดุบููู**
4. **ุงุณุชุฎุฏู ุงูุฎูุงุฑุงุช ุงูุงูุชูุงุฆูุฉ ุนูุฏูุง ูููู ููููุงู**
5. **ุชุญูู ูู ุงููุชุงุฆุฌ ุจุนุฏ ุงูุชุดุบูู**

---

## ๐ ุงูุฏุนู - Support

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุฑุงุฌุน ุณุฌูุงุช ุงูุฃุฎุทุงุก ูู Supabase
2. ุชุญูู ูู ุณูุงุณุงุช RLS
3. ุชุฃูุฏ ูู ุงูุตูุงุญูุงุช
4. ุงุณุชุนุฏ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ
