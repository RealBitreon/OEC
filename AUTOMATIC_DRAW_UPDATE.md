# โ ุชุญุฏูุซ: ุงูุณุญุจ ุงูุชููุงุฆู ูู ููู ุงูุงูุชูุงุก

## ๐ฏ ุงูุชุบููุฑ

**ูุจู:** ูุงู ููุงู ุญูู ูููุตู ูุชุงุฑูุฎ ุงูุณุญุจ (wheel_at) ูุฌุจ ุชุญุฏูุฏู ูุฏููุงู

**ุจุนุฏ:** ุงูุณุญุจ ูุชู ุชููุงุฆูุงู ูู ููุณ ููู ุงูุชูุงุก ุงููุณุงุจูุฉ

---

## ๐ ุงูุชูุงุตูู

### ูุง ุชู ุชุบููุฑู:

1. **ุฅุฒุงูุฉ ุญูู ุชุงุฑูุฎ ุงูุณุญุจ ุงููููุตู**
   - ูู ูุนุฏ ุงููุณุชุฎุฏู ุจุญุงุฌุฉ ูุฅุฏุฎุงู ุชุงุฑูุฎ ุงูุณุญุจ ูุฏููุงู
   - ุงููุงุฌูุฉ ุงูุขู ุชุนุฑุถ ููุท ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ูุชุงุฑูุฎ ุงูููุงูุฉ

2. **ุฑุจุท ุชููุงุฆู**
   - ุนูุฏ ุชุญุฏูุฏ ุชุงุฑูุฎ ุงูููุงูุฉุ ูุชู ุชููุงุฆูุงู ุชุนููู `wheel_at` ูููุณ ุงูุชุงุฑูุฎ
   - ูุง ุญุงุฌุฉ ูุฃู ุฅุฌุฑุงุก ุฅุถุงูู ูู ุงููุณุชุฎุฏู

3. **ุฑุณุงูุฉ ุชูุถูุญูุฉ**
   - ุชุธูุฑ ุฑุณุงูุฉ ุชุญุช ุญูู ุชุงุฑูุฎ ุงูููุงูุฉ: "ุณูุชู ุงูุณุญุจ ุชููุงุฆูุงู ูู ููุณ ุงูููู"
   - ุฃููููุฉ ๐ก ูุน ูุต ุชูุถูุญู

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

### 1. `app/dashboard/competitions/[id]/manage/ManageCompetition.tsx`
**ุงูุชุบููุฑ:**
```typescript
// ูุจู: 3 ุญููู (start_at, end_at, wheel_at)
// ุจุนุฏ: 2 ุญููู ููุท (start_at, end_at)

onChange={e => {
  const isoString = e.target.value ? new Date(e.target.value).toISOString() : ''
  setCompetition({ 
    ...competition, 
    end_at: isoString,
    wheel_at: isoString // ุงูุณุญุจ ูู ููุณ ููู ุงูุงูุชูุงุก
  })
}}
```

### 2. `app/dashboard/components/sections/CompetitionsManagement.tsx`
**ุงูุชุบููุฑ:**
```typescript
// ูู ูููุฐุฌ ุงูุฅูุดุงุก/ุงูุชุนุฏูู
onChange={e => {
  setFormData({ 
    ...formData, 
    end_at: e.target.value,
    wheel_at: e.target.value // ุงูุณุญุจ ูู ููุณ ููู ุงูุงูุชูุงุก
  })
}}

// ูู ุงูุชุญูู ูู ุงูุชูุงุฑูุฎ
// ุชู ุฅุฒุงูุฉ: if (endDate >= wheelDate) { ... }
// ูุฃู wheel_at ุงูุขู ุฏุงุฆูุงู = end_at
```

---

## ๐จ ุงููุงุฌูุฉ ุงูุฌุฏูุฏุฉ

### ูุจู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุชุงุฑูุฎ ุงูุจุฏุงูุฉ *    ุชุงุฑูุฎ ุงูููุงูุฉ *    ุชุงุฑูุฎ ุงูุณุญุจ *  โ
โ  [___________]      [___________]      [___________] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุจุนุฏ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุชุงุฑูุฎ ุงูุจุฏุงูุฉ *              ุชุงุฑูุฎ ุงูููุงูุฉ *           โ
โ  [___________]                [___________]              โ
โ                               ๐ก ุณูุชู ุงูุณุญุจ ุชููุงุฆูุงู    โ
โ                                  ูู ููุณ ุงูููู           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงูููุงุฆุฏ

1. **ุฃุจุณุท ูููุณุชุฎุฏู**
   - ุญูู ูุงุญุฏ ุฃูู ููุชุนุจุฆุฉ
   - ูุง ุญุงุฌุฉ ููุชูููุฑ ูู ููุนุฏ ุงูุณุญุจ

2. **ุฃูู ุนุฑุถุฉ ููุฃุฎุทุงุก**
   - ูุง ูููู ูุณูุงู ุชุญุฏูุฏ ุชุงุฑูุฎ ุงูุณุญุจ
   - ูุง ูููู ุชุญุฏูุฏ ุชุงุฑูุฎ ุณุญุจ ุฎุงุทุฆ

3. **ููุทูู ุฃูุซุฑ**
   - ุงูุณุญุจ ูุญุฏุซ ูุจุงุดุฑุฉ ุจุนุฏ ุงูุชูุงุก ุงููุณุงุจูุฉ
   - ุณูุฑ ุนูู ุทุจูุนู ููุชููุน

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุฅูุดุงุก ูุณุงุจูุฉ ุฌุฏูุฏุฉ:
1. ุงุฐูุจ ุฅูู Dashboard โ Competitions
2. ุงููุฑ "ุฅูุดุงุก ูุณุงุจูุฉ ุฌุฏูุฏุฉ"
3. ุงููุฃ ุงูุนููุงู ูุงููุตู
4. ุญุฏุฏ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ููุท
5. ุงุญูุธ
6. ุชุญูู ูู Supabase: `wheel_at` ูุฌุจ ุฃู ูุณุงูู `end_at` โ

### ุงุฎุชุจุงุฑ ุชุนุฏูู ูุณุงุจูุฉ ููุฌูุฏุฉ:
1. ุงุฐูุจ ุฅูู ูุณุงุจูุฉ ููุฌูุฏุฉ
2. ุงููุฑ "ุฅุฏุงุฑุฉ ุงููุณุงุจูุฉ"
3. ุบูุฑ ุชุงุฑูุฎ ุงูููุงูุฉ
4. ุงุญูุธ
5. ุชุญูู ูู Supabase: `wheel_at` ูุฌุจ ุฃู ูุชุญุฏุซ ุชููุงุฆูุงู โ

---

## ๐ ุงูุชุฃุซูุฑ ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- `wheel_at` ูุง ูุฒุงู ููุฌูุฏุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุชู ุชุนูููู ุชููุงุฆูุงู ุจููุณ ูููุฉ `end_at`
- ูุง ุญุงุฌุฉ ูุชุบููุฑ schema

### ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ:
- ุงููุณุงุจูุงุช ุงููุฏููุฉ ุชุญุชูุธ ุจููู `wheel_at` ุงูุฎุงุตุฉ ุจูุง
- ุงููุณุงุจูุงุช ุงูุฌุฏูุฏุฉ ุณุชุญุตู ุนูู `wheel_at = end_at` ุชููุงุฆูุงู

---

## ๐ ุงูุชูุงูู ูุน ุงูููุฏ ุงูููุฌูุฏ

### ุงูููุฏ ุงูุฐู ููุฑุฃ `wheel_at`:
- ูุง ูุฒุงู ูุนูู ุจุดูู ุทุจูุนู
- `wheel_at` ููุฌูุฏ ููุญุชูู ุนูู ูููุฉ ุตุญูุญุฉ
- ูุง ุญุงุฌุฉ ูุชุบููุฑ ุฃู API ุฃู query

### ูุซุงู:
```typescript
// ูุฐุง ุงูููุฏ ูุง ูุฒุงู ูุนูู ุจุฏูู ุชุบููุฑ
const wheelDate = new Date(competition.wheelSpinAt)
console.log('Draw date:', wheelDate)
```

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุฅุฐุง ุฃุฑุฏุช ุชุบููุฑ ููุนุฏ ุงูุณุญุจ ูุงุญูุงู:
- ููููู ุชุนุฏูู `wheel_at` ูุจุงุดุฑุฉ ูู Supabase
- ุฃู ููููู ุฅุถุงูุฉ ุญูู ูููุตู ูู ุงููุงุฌูุฉ ูุฑุฉ ุฃุฎุฑู
- ุงูููุฏ ูุฑู ููุฏุนู ููุง ุงูุญุงูุชูู

### ูููุทูุฑูู:
```typescript
// ูู ุฃู ููุงู ุชุญุชุงุฌ ููู ูุชุญุฏูุฏ wheel_at
const updatedData = {
  ...competitionData,
  wheel_at: competitionData.end_at // ุฏุงุฆูุงู ููุณ ุชุงุฑูุฎ ุงูุงูุชูุงุก
}
```

---

## ๐ ุงูุฎูุงุตุฉ

**ุงูุชุบููุฑ:** ุงูุณุญุจ ุงูุขู ุชููุงุฆู ูู ููุณ ููู ุงูุชูุงุก ุงููุณุงุจูุฉ

**ุงููุงุฆุฏุฉ:** ูุงุฌูุฉ ุฃุจุณุทุ ุฃูู ุฃุฎุทุงุกุ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู

**ุงูุชูุงูู:** ูุชูุงูู ุชูุงูุงู ูุน ุงูููุฏ ุงูููุฌูุฏ

**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

---

**Commit:** `397505a - feat: Make draw automatic on competition end date`  
**Branch:** `feature/ux-improvements`
