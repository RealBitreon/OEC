# ========================================
# Light Auth (JSON + Cookies)
# ========================================
# Secret key for signing session cookies (REQUIRED)
# Generate a random string (at least 32 characters)
AUTH_COOKIE_SECRET=your-secret-key-here-change-this-to-random-string

# Role Codes for Admin Access
# These codes allow users to register as managers or CEOs
# Change these to your own secure codes!
CEO_ROLE_CODE=CE@
MANAGER_ROLE_CODE=$RC

# ========================================
# Data Provider Configuration
# ========================================
# Choose data storage backend: json | supabase
# Default: json (file-based storage)
# Set to 'supabase' when ready to migrate to database
DATA_PROVIDER=json

# ========================================
# Clerk Authentication (DEPRECATED - Not used in Light Auth)
# ========================================
# Get these from: https://dashboard.clerk.com/last-active?path=api-keys
# Sign up at https://clerk.com and create a new application

NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_YOUR_PUBLISHABLE_KEY_HERE
CLERK_SECRET_KEY=sk_test_YOUR_SECRET_KEY_HERE

# Clerk Webhook Secret (REQUIRED for automatic profile creation in Supabase)
# Get this from: https://dashboard.clerk.com/last-active?path=webhooks
# 1. Create a webhook endpoint: https://your-domain.com/api/webhooks/clerk
# 2. Subscribe to: user.created
# 3. Copy the Signing Secret
CLERK_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET_HERE

# Clerk URLs (these are the default paths - usually don't need to change)
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/dashboard

# ========================================
# Supabase Configuration (Database Only)
# ========================================
# Get these from: https://app.supabase.com/project/_/settings/api
# Note: We use Clerk for authentication, Supabase only for database with RLS

# Project URL (e.g., https://xxxxxxxxxxxxx.supabase.co)
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co

# Anon/Public Key (safe to use in browser)
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.YOUR_ANON_KEY_HERE

# Service Role Key (KEEP SECRET! Server-side only - used for webhook)
# This key has full database access - never expose to client
# Only used in webhook to create profiles, not in regular app code
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.YOUR_SERVICE_ROLE_KEY_HERE

# ========================================
# App Configuration
# ========================================
# Comma-separated list of allowed URLs for your app
# Add your production domain when deploying
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ========================================
# SETUP INSTRUCTIONS (Clerk → Supabase JWT Integration)
# ========================================
# 
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Fill in your Clerk credentials:
#    - Go to https://dashboard.clerk.com
#    - Create a new application
#    - Copy the API keys
#
# 3. Create Clerk JWT Template:
#    - Go to Clerk Dashboard → JWT Templates
#    - Create new template named "supabase"
#    - Set claims: { "sub": "{{user.id}}" }
#    - Note the JWKS URL
#
# 4. Fill in your Supabase credentials:
#    - Go to https://app.supabase.com
#    - Create a new project
#    - Copy the API keys from Settings > API
#
# 5. Configure Supabase JWT:
#    - Go to Supabase Dashboard → Authentication → Providers
#    - Scroll to "Custom JWT"
#    - Set JWKS URL from Clerk (step 3)
#    - Set JWT Issuer to your Clerk domain
#
# 6. Run Database Migration:
#    - Open Supabase SQL Editor
#    - Run: docs/database/01-clerk-jwt-setup.sql
#
# 7. Set up Clerk webhook (for automatic profile creation):
#    - Go to https://dashboard.clerk.com/last-active?path=webhooks
#    - Add endpoint: https://your-domain.com/api/webhooks/clerk
#    - Subscribe to: user.created
#    - Copy the Signing Secret to CLERK_WEBHOOK_SECRET
#
# 8. Create user profiles:
#    - Sign up users via Clerk
#    - Webhook will auto-create profiles with STUDENT role
#    - Assign admin roles via SQL or /ceo/users page
#
# For detailed setup instructions, see:
# - docs/CLERK-SUPABASE-QUICK-START.md (5-minute guide)
# - docs/CLERK-SUPABASE-INTEGRATION.md (complete guide)
#
# To verify setup:
# - Run: node scripts/verify-clerk-supabase.js
#
